{"version":3,"sources":["store.js","socket.js","axios.js","palette.js","components/PlaceHolder.js","components/Canvas.js","components/MenuWrapper.js","components/Color.js","components/Card.js","components/BottomMenu.js","components/TopMenu.js","components/Loading.js","components/modals/InfoModal.js","components/modals/SessionModal.js","App.js","reportWebVitals.js","index.js"],"names":["createStore","state","color","pos","x","y","isConnected","sharedEnv","isTestVersion","pixelSize","canvasSize","width","height","action","type","newColor","socket","openSocket","query","room","window","location","pathname","replace","axios","palette","name","Self","styled","div","props","size","lighten","FinalComponent","children","ArrayKeyedMap","require","PaintingArea","canvas","CanvasWrapper","Canvas","createBorder","canvasContext","lineWidth","store","getState","setLineDash","strokeStyle","strokeRect","loadMap","map","resetCanvas","forEach","key","a","changePixel","loadMapFromAPI","get","params","then","data","dispatch","catch","err","alert","reload","onPaint","onJoinRoom","clearRect","calculatePlaceholderPosition","scaledPixelSize","scale","mX","lastCoord","mY","onMouseMove","e","getMousePos","current","curX","clientX","curY","clientY","nativeEvent","which","canvasColor","getImageData","setState","oldState","altKey","paint","onMouseDown","buttons","overrideColor","lastPaint","emit","evt","rect","getBoundingClientRect","left","top","right","bottom","React","createRef","mapCache","coord","this","fillStyle","fillRect","getContext","focus","panzoomInstance","panzoom","minZoom","beforeMouseDown","on","localStorage","setItem","JSON","stringify","getTransform","Number","length","onKeyDown","onKeyPressed","onContextMenu","preventDefault","PlaceHolder","borderSize","style","transform","ref","Component","connect","Wrapper","justify","onClick","darken","Color","Card","BottomMenu","useState","currentColor","setCurrentColor","useSelector","snackbar","useSnackbar","changeColor","idx","newCol","showMessage","fontWeight","mountRef","useRef","useEffect","isNaN","parseInt","getItem","findIndex","el","MenuWrapper","className","borderRadius","InformationText","span","VerticalCard","TopMenu","userCount","setUserCount","count","flexDirection","pointerEvents","Loading","getIntinialState","isHiding","hideCompletely","startLoading","timer1","clearTimeout","timer2","onLoadingEnd","setTimeout","CircularProgress","marginBottom","PureComponent","InfoModal","open","setOpen","handleClose","host","includes","Dialog","onClose","DialogTitle","id","DialogContent","dividers","Typography","gutterBottom","DialogActions","Button","Form","form","FormControlSpaced","FormControl","SessionModal","setSize","onChange","limitedValue","target","value","oldSize","InputLabel","htmlFor","Input","required","post","href","createdRoom","App","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","theme","createTheme","ReactDOM","render","ThemeProvider","SnackbarProps","autoHideDuration","anchorOrigin","vertical","horizontal","ClickAwayListenerProps","mouseEvent","ContentProps","minWidth","StrictMode","path","document","getElementById"],"mappings":"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","file":"static/js/main.158e5fa5.chunk.js","sourcesContent":["import { createStore } from \"redux\";\r\n\r\nfunction main(\r\n  state = {\r\n    color: \"#ff0000\",\r\n    pos: {\r\n      x: 0,\r\n      y: 0,\r\n    },\r\n    isConnected: false,\r\n    sharedEnv: {\r\n      isTestVersion: false,\r\n      pixelSize: 0,\r\n      canvasSize: {\r\n        width: 0,\r\n        height: 0,\r\n      },\r\n    },\r\n  },\r\n  action\r\n) {\r\n  if (typeof state === \"undefined\") {\r\n    return 0;\r\n  }\r\n\r\n  switch (action.type) {\r\n    case \"COLOR\":\r\n      return { ...state, color: action.newColor };\r\n    case \"MOUSE_POS\":\r\n      return { ...state, pos: action.pos };\r\n\r\n    case \"IS_CONNECTED\":\r\n      return { ...state, isConnected: action.isConnected };\r\n\r\n    case \"SHARED_ENV\":\r\n      return { ...state, sharedEnv: action.sharedEnv };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n\r\nexport default createStore(main);\r\n","import openSocket from \"socket.io-client\";\r\n\r\nlet socket;\r\n\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n  socket = openSocket(\"http://localhost:1337\", {\r\n    query: {\r\n      room: window.location.pathname.replace(\"/\", \"\"),\r\n    },\r\n  });\r\n} else {\r\n  socket = openSocket({\r\n    query: {\r\n      room: window.location.pathname.replace(\"/\", \"\"),\r\n    },\r\n  });\r\n}\r\n\r\nexport default socket;\r\n","import axios from \"axios\";\r\n\r\nif (!process.env.NODE_ENV || process.env.NODE_ENV === \"development\") {\r\n  axios.defaults.baseURL = \"http://localhost:1337\";\r\n\r\n  // } else {\r\n}\r\n\r\nexport default axios;\r\n","const palette = [\r\n  { name: \"red\", color: \"#ff0000\" },\r\n  { name: \"black\", color: \"#000000\" },\r\n  // { name: \"white\", color: \"#ffffff\" },\r\n  { name: \"gray\", color: \"#808080\" },\r\n  { name: \"purple\", color: \"#800080\" },\r\n  { name: \"green\", color: \"#008000\" },\r\n  { name: \"yellow\", color: \"#ffff00\" },\r\n  { name: \"orange\", color: \"#ffb733\" },\r\n];\r\n\r\nexport default palette;\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { lighten } from \"@material-ui/core\";\r\n\r\nconst Self = styled.div`\r\n  width: ${(props) => props.size + \"px\"};\r\n  height: ${(props) => props.size + \"px\"};\r\n  /* background: rgba(0, 0, 0, 0.5); */\r\n  image-rendering: pixelated;\r\n\r\n  border: ${(props) => props.size / 10 + \"px\"} solid\r\n    ${(props) => lighten(props.color, 0.6)};\r\n  z-index: 100;\r\n  position: absolute;\r\n  pointer-events: none;\r\n`;\r\n\r\nconst FinalComponent = (props) => <Self {...props}>{props.children}</Self>;\r\n\r\nexport default FinalComponent;\r\n","import React, { Component } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport store from \"../store\";\r\nimport panzoom from \"panzoom\";\r\nimport socket from \"../socket\";\r\nimport axios from \"../axios\";\r\nimport palette from \"../palette\";\r\nimport { connect } from \"react-redux\";\r\nimport PlaceHolder from \"./PlaceHolder\";\r\n\r\nconst ArrayKeyedMap = require(\"array-keyed-map\");\r\n\r\nconst PaintingArea = styled.canvas`\r\n  /* border: 10px solid #000000; */\r\n  margin: 0;\r\n  padding: 0;\r\n  position: relative;\r\n  image-rendering: pixelated;\r\n  display: block;\r\n  /* \r\n  &::before {\r\n    content: \"\";\r\n    position: absolute;\r\n    border-style: solid;\r\n    border-width: 0 16px 16px;\r\n    border-color: red transparent;\r\n    display: block;\r\n    width: 0;\r\n    z-index: 1;\r\n    margin-left: -16px;\r\n    top: -16px;\r\n    left: 50%;\r\n  } */\r\n`;\r\n\r\n// const CanvasBorder = styled.div`\r\n//   border: 10px solid #000000;\r\n// `;\r\n\r\nconst CanvasWrapper = styled.div`\r\n  height: 100vh;\r\n  width: 100vw;\r\n  display: block;\r\n  cursor: crosshair;\r\n`;\r\n\r\n// eslint-disable-next-line no-unused-vars\r\n\r\nclass Canvas extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.canvas = React.createRef(null);\r\n    this.state = {\r\n      scale: 1,\r\n      lastCoord: { x: 0, y: 0, scale: 1, mX: 0, mY: 0 },\r\n      mapCache: new ArrayKeyedMap(),\r\n      color: \"rgba()\",\r\n    };\r\n  }\r\n\r\n  changePixel(color, coord) {\r\n    this.canvasContext.fillStyle = color;\r\n\r\n    // if (color === \"white\" || color.toLowerCase() === \"#ffffff\")\r\n    //   this.canvasContext.fillStyle = \"rgba(0,0,0,0)\";\r\n\r\n    this.canvasContext.fillRect(\r\n      coord[0],\r\n      coord[1],\r\n      store.getState().sharedEnv.pixelSize,\r\n      store.getState().sharedEnv.pixelSize\r\n    );\r\n  }\r\n\r\n  createBorder = () => {\r\n    this.canvasContext.lineWidth = store.getState().sharedEnv.pixelSize * 2;\r\n    this.canvasContext.setLineDash([\r\n      this.canvasContext.lineWidth,\r\n      this.canvasContext.lineWidth,\r\n    ]);\r\n    this.canvasContext.strokeStyle = \"#ff00ff\";\r\n    this.canvasContext.strokeRect(\r\n      0,\r\n      0,\r\n      this.props.sharedEnv.canvasSize.width,\r\n      this.props.sharedEnv.canvasSize.height\r\n    );\r\n  };\r\n\r\n  loadMap = (map) => {\r\n    this.resetCanvas();\r\n\r\n    map = new ArrayKeyedMap(map);\r\n\r\n    // this.setState({ ...this.state, mapCache: map });\r\n\r\n    // setTimeout(() => {\r\n    map.forEach(async ({ color }, key) => {\r\n      this.changePixel(color, key);\r\n    });\r\n    // }, 500);\r\n  };\r\n\r\n  loadMapFromAPI = (room) => {\r\n    axios\r\n      .get(\"/api/map\", {\r\n        params: {\r\n          room: window.location.pathname.replace(\"/\", \"\"),\r\n        },\r\n      })\r\n      .then(({ data }) => {\r\n        store.dispatch({\r\n          type: \"SHARED_ENV\",\r\n          sharedEnv: {\r\n            ...store.getState().sharedEnv,\r\n            canvasSize: { ...data.canvasSize },\r\n          },\r\n        });\r\n\r\n        this.loadMap(data.map);\r\n      })\r\n      .catch((err) => {\r\n        alert(\"An error occured while loading map.\");\r\n        window.location.reload();\r\n      });\r\n  };\r\n\r\n  onPaint = (data) => {\r\n    let { x, y, color } = data;\r\n\r\n    this.changePixel(color, [x, y]);\r\n\r\n    // this.canvasContext.fillStyle = color;\r\n    // this.canvasContext.fillRect(\r\n    //   x,\r\n    //   y,\r\n    //   store.getState().sharedEnv.pixelSize,\r\n    //   store.getState().sharedEnv.pixelSize\r\n    // );\r\n  };\r\n\r\n  componentDidMount() {\r\n    if (this.canvas != null) {\r\n      this.canvasContext = this.canvas.current.getContext(\"2d\");\r\n      this.canvas.current.focus();\r\n    }\r\n\r\n    const panzoomInstance = panzoom(this.canvas.current, {\r\n      minZoom: 0.5,\r\n\r\n      beforeMouseDown: function (e) {\r\n        if (e.buttons === 4) return;\r\n        var shouldIgnore = !e.altKey;\r\n        return shouldIgnore;\r\n      },\r\n    });\r\n\r\n    // if (localStorage.getItem(\"lastCameraPos\") != null) {\r\n    //   let lastCamPos = JSON.parse(localStorage.getItem(\"lastCameraPos\"));\r\n\r\n    //   panzoomInstance.moveTo(lastCamPos.x, lastCamPos.y);\r\n    //   panzoomInstance.zoomTo(lastCamPos.x, lastCamPos.y, lastCamPos.scale);\r\n\r\n    //   this.setState((oldState) => {\r\n    //     return {\r\n    //       ...oldState,\r\n    //       scale: lastCamPos.scale,\r\n    //     };\r\n    //   });\r\n    // }\r\n\r\n    panzoomInstance.on(\"transform\", (e) => {\r\n      localStorage.setItem(\r\n        \"lastCameraPos\",\r\n        JSON.stringify({ ...panzoomInstance.getTransform() })\r\n      );\r\n\r\n      this.setState(\r\n        (oldState) => {\r\n          return {\r\n            ...oldState,\r\n            scale: panzoomInstance.getTransform().scale,\r\n            lastCoord: { ...panzoomInstance.getTransform() },\r\n          };\r\n        },\r\n        () => {\r\n          // this.createBorder();\r\n        }\r\n      );\r\n    });\r\n\r\n    socket.on(\"paint\", this.onPaint);\r\n    socket.on(\"loadMap\", this.loadMap);\r\n    // socket.on(\"connect\", this.loadMapFromAPI);\r\n    socket.on(\"onJoinRoom\", this.onJoinRoom);\r\n    socket.on(\"disconnect\", () => {\r\n      window.location.reload();\r\n    });\r\n    socket.on(\"roomError\", () => {\r\n      window.location = \"/\";\r\n    });\r\n\r\n    // this.loadMapFromAPI();\r\n\r\n    // for (let x = 0; x < 1920; x++) {\r\n    //   for (let y = 0; y < 1080; y++) {\r\n    //     this.paint({ x: x, y: y });\r\n    //   }\r\n    // }\r\n  }\r\n\r\n  onJoinRoom = (room) => {\r\n    this.loadMapFromAPI(room);\r\n  };\r\n\r\n  resetCanvas = () => {\r\n    this.canvasContext.clearRect(\r\n      0,\r\n      0,\r\n      this.props.sharedEnv.canvasSize.width || 0,\r\n      this.props.sharedEnv.canvasSize.height || 0\r\n    );\r\n\r\n    this.createBorder();\r\n  };\r\n\r\n  calculatePlaceholderPosition = (pos) => {\r\n    let pixelSize = store.getState().sharedEnv.pixelSize;\r\n    let scaledPixelSize = pixelSize * this.state.scale;\r\n\r\n    pos.mX = pos.mX - ((pos.mX - this.state.lastCoord.x) % scaledPixelSize);\r\n    pos.mY = pos.mY - ((pos.mY - this.state.lastCoord.y) % scaledPixelSize);\r\n\r\n    // if (pos.mX - this.state.lastCoord.x < scaledPixelSize)\r\n    //   pos.mX += scaledPixelSize;\r\n\r\n    // if (pos.mY - this.state.lastCoord.y < scaledPixelSize)\r\n    //   pos.mY += scaledPixelSize;\r\n\r\n    // // console.log(\r\n    // //   pos.mX - this.state.lastCoord.x,\r\n    // //   store.getState().sharedEnv.canvasSize.width - scaledPixelSize\r\n    // // );\r\n    // if (\r\n    //   pos.mX - this.state.lastCoord.x >=\r\n    //   store.getState().sharedEnv.canvasSize.width - scaledPixelSize\r\n    // )\r\n    //   pos.mX -= scaledPixelSize;\r\n\r\n    // console.log(\r\n    //   pos.mX - this.state.lastCoord.x >=\r\n    //     store.getState().sharedEnv.canvasSize.width - scaledPixelSize\r\n    // );\r\n\r\n    // if (\r\n    //   pos.mY - this.state.lastCoord.y >=\r\n    //   store.getState().sharedEnv.canvasSize.height - scaledPixelSize\r\n    // )\r\n    //   pos.mY -= scaledPixelSize;\r\n\r\n    // console.log(pos.mX);\r\n  };\r\n\r\n  onMouseMove = (e) => {\r\n    let pos = this.getMousePos(this.canvas.current, e);\r\n\r\n    let scale = this.state.lastCoord.scale;\r\n\r\n    pos = {\r\n      x: pos.x - (pos.x % store.getState().sharedEnv.pixelSize),\r\n      y: pos.y - (pos.y % store.getState().sharedEnv.pixelSize),\r\n\r\n      curX:\r\n        e.clientX -\r\n        (e.clientX % (store.getState().sharedEnv.pixelSize * scale)),\r\n      curY:\r\n        e.clientY -\r\n        (e.clientY % (store.getState().sharedEnv.pixelSize * scale)),\r\n      scale: this.state.lastCoord.scale,\r\n\r\n      mX: e.clientX,\r\n      mY: e.clientY,\r\n    };\r\n\r\n    this.calculatePlaceholderPosition(pos);\r\n\r\n    store.dispatch({ type: \"MOUSE_POS\", pos });\r\n\r\n    if (e.nativeEvent.which !== 1 && e.nativeEvent.which !== 3) {\r\n      let canvasColor = this.canvasContext.getImageData(\r\n        pos.x,\r\n        pos.y,\r\n        1,\r\n        1\r\n      ).data;\r\n\r\n      this.setState((oldState) => {\r\n        return {\r\n          ...oldState,\r\n          color: `rgba(${canvasColor[0]},${canvasColor[1]},${canvasColor[2]},255})`,\r\n          lastCoord: {\r\n            ...oldState.lastCoord,\r\n            mX: pos.mX,\r\n            mY: pos.mY,\r\n          },\r\n        };\r\n      });\r\n    }\r\n\r\n    if (e.nativeEvent.which !== 1 && e.nativeEvent.which !== 3) return;\r\n    if (e.altKey) return;\r\n\r\n    this.setState((oldState) => {\r\n      return {\r\n        ...oldState,\r\n        lastCoord: { ...oldState.lastCoord, mX: pos.mX, mY: pos.mY },\r\n      };\r\n    });\r\n\r\n    this.paint(\r\n      pos,\r\n      e.nativeEvent.which === 3 ? \"#ffffff\" : store.getState().color\r\n    );\r\n  };\r\n\r\n  onMouseDown = (e) => {\r\n    let pos = this.getMousePos(this.canvas.current, e);\r\n\r\n    pos = {\r\n      x: pos.x - (pos.x % store.getState().sharedEnv.pixelSize),\r\n      y: pos.y - (pos.y % store.getState().sharedEnv.pixelSize),\r\n    };\r\n\r\n    if (e.nativeEvent.which !== 1 && e.nativeEvent.which !== 3) return;\r\n    if (e.altKey) return;\r\n\r\n    this.setState((oldState) => {\r\n      return {\r\n        ...oldState,\r\n        lastCoord: { ...oldState.lastCoord, which: e.buttons },\r\n      };\r\n    });\r\n\r\n    this.paint(\r\n      pos,\r\n      e.nativeEvent.which === 3 ? \"#ffffff\" : store.getState().color\r\n    );\r\n  };\r\n\r\n  paint = (pos, overrideColor = false) => {\r\n    const color = overrideColor ? overrideColor : store.getState().color;\r\n\r\n    this.setState((oldState) => {\r\n      return {\r\n        ...oldState,\r\n        color: color,\r\n        lastPaint: { ...pos, color: color },\r\n      };\r\n    });\r\n\r\n    // this.canvasContext.fillStyle = store.getState().color;\r\n    // this.canvasContext.fillRect(\r\n    //   pos.x,\r\n    //   pos.y,\r\n    //   store.getState().sharedEnv.pixelSize,\r\n    //   store.getState().sharedEnv.pixelSize\r\n    // );\r\n\r\n    socket.emit(\"paint\", {\r\n      ...pos,\r\n      color: color,\r\n      // key: btoa(\"1337_\" + Date.now() + \"_l33t\"),\r\n    });\r\n  };\r\n\r\n  getMousePos = (canvas, evt) => {\r\n    var rect = canvas.getBoundingClientRect();\r\n\r\n    let left = rect.left + 0;\r\n    let top = rect.top + 0;\r\n    let right = rect.right + 0;\r\n    let bottom = rect.bottom + 0;\r\n    return {\r\n      x: ((evt.clientX - left) / (right - left)) * canvas.width,\r\n      y: ((evt.clientY - top) / (bottom - top)) * canvas.height,\r\n      ...evt,\r\n    };\r\n  };\r\n\r\n  onKeyPressed(e) {\r\n    if (Number(e.key) > 0 && Number(e.key) < palette.length + 1) {\r\n      store.dispatch({\r\n        type: \"COLOR\",\r\n        newColor: palette[Number(e.key) - 1].color,\r\n      });\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <CanvasWrapper\r\n        onMouseDown={this.onMouseDown}\r\n        onKeyDown={this.onKeyPressed}\r\n        onContextMenu={(e) => {\r\n          e.preventDefault();\r\n        }}\r\n      >\r\n        <PlaceHolder\r\n          size={store.getState().sharedEnv.pixelSize * this.state.scale}\r\n          borderSize={0}\r\n          color={this.state.color === \"#ffffff\" ? \"#000000\" : this.state.color}\r\n          style={{\r\n            transform:\r\n              \"translate(\" +\r\n              this.state.lastCoord.mX +\r\n              \"px,\" +\r\n              this.state.lastCoord.mY +\r\n              \"px)\",\r\n            // transform:\r\n            // \"translate(\" +\r\n            // this.state.lastCoord.mX +\r\n            // \"px,\" +\r\n            // this.state.lastCoord.mY +\r\n            // \"px) scale(\" +\r\n            // this.state.lastCoord.scale +\r\n            // \")\",\r\n          }}\r\n          // onClick={(e) => {\r\n          //   e.preventDefault();\r\n          //   e.stopPropagation();\r\n          // }}\r\n        />\r\n        <PaintingArea\r\n          ref={this.canvas}\r\n          onMouseMove={this.onMouseMove}\r\n          // onWheel={this.onMouseWheel}\r\n          width={this.props.sharedEnv.canvasSize.width || 0}\r\n          height={this.props.sharedEnv.canvasSize.height || 0}\r\n        ></PaintingArea>\r\n      </CanvasWrapper>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    sharedEnv: state.sharedEnv,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps)(Canvas);\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Wrapper = styled.div`\r\n  position: absolute;\r\n  /* width: 100%; */\r\n  display: flex;\r\n\r\n  ${(props) =>\r\n    (props.justify || \"center\") === \"center\" &&\r\n    `\r\n    left: 50%;\r\n    transform: translateX(-50%);\r\n    `}\r\n  z-index:1000;\r\n  justify-content: ${(props) => props.justify || \"center\"};\r\n`;\r\n\r\nconst FinalComponent = (props) => (\r\n  <Wrapper\r\n    onClick={(e) => e.preventDefault()}\r\n    onMouseMove={(e) => e.preventDefault()}\r\n    {...props}\r\n  >\r\n    {props.children}\r\n  </Wrapper>\r\n);\r\n\r\nexport default FinalComponent;\r\n\r\n/* \r\n\r\nWITHOUT THIS MENU'S ANIMATION IS BUGGY \r\n\r\n*/\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport { lighten, darken } from \"polished\";\r\n\r\nconst Wrapper = styled.div`\r\n  background: ${(props) => props.color};\r\n  height: 50px;\r\n  width: 30px;\r\n  height: 100%;\r\n  margin-right: 10px;\r\n  border-radius: 100%;\r\n  cursor: pointer;\r\n\r\n  &:last-of-type {\r\n    margin-right: 0px;\r\n  }\r\n\r\n  &:hover {\r\n    background: ${(props) => lighten(0.1, props.color)};\r\n  }\r\n\r\n  transition: border 0.1s;\r\n\r\n  &.selected {\r\n    background: ${(props) => lighten(0.1, props.color)};\r\n    border: 4px solid ${(props) => darken(0.2, props.color)};\r\n  }\r\n`;\r\n\r\nexport default function Color(props) {\r\n  return <Wrapper {...props} />;\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\n\r\nconst Card = styled.div`\r\n  background: #424242;\r\n  min-height: 16px;\r\n  /* width: auto; */\r\n  border-radius: 10px;\r\n\r\n  position: relative;\r\n  padding: 10px;\r\n  display: inline-flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  align-self: flex-start;\r\n\r\n  user-select: none;\r\n\r\n  overflow: hidden;\r\n\r\n  box-shadow: 0 2px 3px rgba(0, 0, 0, 0.5);\r\n\r\n  margin-right: 10px;\r\n\r\n  &:last-of-type {\r\n    margin-right: 0px;\r\n  }\r\n`;\r\n\r\nconst FinalComponent = (props) => <Card {...props}>{props.children}</Card>;\r\n\r\nexport default FinalComponent;\r\n","/* eslint-disable react-hooks/exhaustive-deps */\r\nimport React, { useEffect, useState, useRef } from \"react\";\r\n// import styled from \"styled-components\";\r\nimport MenuWrapper from \"./MenuWrapper\";\r\nimport Color from \"./Color\";\r\nimport Card from \"./Card\";\r\nimport store from \"../store\";\r\nimport palette from \"../palette\";\r\nimport { useSnackbar } from \"material-ui-snackbar-provider\";\r\nimport { useSelector } from \"react-redux\";\r\n// import { Button } from \"@material-ui/core\";\r\n\r\n// const ResetButton = styled(Button)`\r\n//   color: white !important;\r\n// `;\r\n\r\nexport default function BottomMenu() {\r\n  const [currentColor, setCurrentColor] = useState(0);\r\n  const color = useSelector((state) => state.color);\r\n  const snackbar = useSnackbar();\r\n\r\n  const changeColor = (e, idx) => {\r\n    let newCol = palette[idx];\r\n\r\n    store.dispatch({ type: \"COLOR\", newColor: palette[idx].color });\r\n\r\n    localStorage.setItem(\"selectedColor\", idx);\r\n\r\n    snackbar.showMessage(\r\n      <span>\r\n        Color changed to{\" \"}\r\n        <span style={{ color: newCol.color, fontWeight: \"bold\" }}>\r\n          {newCol.name}\r\n        </span>\r\n      </span>\r\n    );\r\n\r\n    setCurrentColor(idx);\r\n  };\r\n\r\n  const mountRef = useRef(false);\r\n\r\n  useEffect(() => {\r\n    if (!isNaN(parseInt(localStorage.getItem(\"selectedColor\"))))\r\n      changeColor(null, parseInt(localStorage.getItem(\"selectedColor\")));\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    let idx = palette.findIndex((el) => el.color === color);\r\n\r\n    if (idx < 0 || idx > palette.length - 1) return;\r\n\r\n    if (mountRef.current === false) {\r\n      mountRef.current = true;\r\n      return;\r\n    }\r\n\r\n    changeColor(null, idx);\r\n  }, [color]);\r\n\r\n  return (\r\n    <MenuWrapper\r\n      style={{\r\n        bottom: 10,\r\n      }}\r\n    >\r\n      {/* <Card\r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{ height: 50 }}\r\n      >\r\n        <span>\r\n          <ResetButton\r\n            // onClick={this.reset}\r\n            onClick={() => window.location.reload()}\r\n            variant=\"text\"\r\n          >\r\n            Reset\r\n          </ResetButton>\r\n        </span>\r\n      </Card> */}\r\n      <Card\r\n        className=\"animate__animated animate__fadeInUp\"\r\n        style={{ height: 50, borderRadius: 25 }}\r\n      >\r\n        {palette.map((el, idx) => {\r\n          return (\r\n            <Color\r\n              {...el}\r\n              className={currentColor === idx && \"selected\"}\r\n              // className={\r\n              //   currentColor === idx &&\r\n              //   \"selected animate__animated animate__jello\"\r\n              // }\r\n              key={idx}\r\n              onClick={(e) => {\r\n                changeColor(e, idx);\r\n              }}\r\n            />\r\n          );\r\n        })}\r\n      </Card>\r\n    </MenuWrapper>\r\n  );\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport styled from \"styled-components\";\r\nimport MenuWrapper from \"./MenuWrapper\";\r\nimport Card from \"./Card\";\r\nimport { useSelector } from \"react-redux\";\r\nimport socket from \"../socket\";\r\n\r\nconst InformationText = styled.span`\r\n  color: white;\r\n  /* font-weight: bold; */\r\n  font-size: 14px;\r\n  font-family: \"Noto Sans\", sans-serif;\r\n`;\r\n\r\nconst VerticalCard = styled(Card)`\r\n  margin-right: 0px;\r\n  margin-bottom: 10px;\r\n\r\n  &:last-of-type {\r\n    margin-bottom: 0px !important;\r\n  }\r\n`;\r\n\r\nexport default function TopMenu() {\r\n  const pos = useSelector((state) => state.pos);\r\n  const sharedEnv = useSelector((state) => state.sharedEnv);\r\n  const [userCount, setUserCount] = React.useState(0);\r\n\r\n  useEffect(() => {\r\n    // socket.emit(\"requestClientCount\");\r\n\r\n    socket.on(\"onJoinRoom\", (count) => {\r\n      socket.emit(\"requestClientCount\", function (count) {\r\n        setUserCount(count);\r\n      });\r\n    });\r\n\r\n    socket.emit(\"requestClientCount\", function (count) {\r\n      setUserCount(count);\r\n    });\r\n\r\n    socket.on(\"clients\", (count) => {\r\n      setUserCount(count);\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <MenuWrapper\r\n      justify=\"left\"\r\n      style={{\r\n        top: 10,\r\n        left: 10,\r\n        flexDirection: \"column\",\r\n        pointerEvents: \"none\",\r\n      }}\r\n    >\r\n      <VerticalCard className=\"animate__animated animate__fadeInDown\">\r\n        <InformationText>\r\n          Press <u>Left Alt + Left Mouse</u> or <br />\r\n          <u>Middle Mouse</u> to move camera.\r\n        </InformationText>\r\n      </VerticalCard>\r\n\r\n      <VerticalCard className=\"animate__animated animate__fadeInDown\">\r\n        <InformationText>\r\n          X: {pos.x} <br />\r\n          Y: {pos.y} <br />\r\n          Width: {sharedEnv.canvasSize.width} <br />\r\n          Height: {sharedEnv.canvasSize.height} <br />\r\n          Online: {userCount}\r\n        </InformationText>\r\n      </VerticalCard>\r\n    </MenuWrapper>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport styled from \"styled-components\";\r\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\r\nimport socket from \"../socket\";\r\nimport store from \"../store\";\r\n\r\nconst Loading = styled.div`\r\n  position: absolute;\r\n  width: 100%;\r\n  height: 100%;\r\n  z-index: 1338;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background: white;\r\n  font-family: \"Noto Sans\", sans-serif;\r\n  flex-direction: column;\r\n`;\r\n\r\nexport default class FinalComponent extends React.PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = this.getIntinialState();\r\n  }\r\n\r\n  getIntinialState = () => {\r\n    return {\r\n      isConnected: false,\r\n      isHiding: false,\r\n      hideCompletely: false,\r\n    };\r\n  };\r\n  componentDidMount() {\r\n    socket.on(\"connect\", this.onLoadingEnd);\r\n    socket.on(\"getMap\", this.onLoadingEnd);\r\n    socket.on(\"disconnect\", this.startLoading);\r\n  }\r\n\r\n  startLoading = () => {\r\n    store.dispatch({ type: \"IS_CONNECTED\", isConnected: false });\r\n\r\n    this.setState(this.getIntinialState());\r\n\r\n    if (typeof this.timer1 !== \"undefined\") {\r\n      clearTimeout(this.timer1);\r\n    }\r\n\r\n    if (typeof this.timer2 !== \"undefined\") {\r\n      clearTimeout(this.timer2);\r\n    }\r\n  };\r\n\r\n  onLoadingEnd = () => {\r\n    if (this.hideCompletely) return;\r\n    if (this.isHiding) return;\r\n\r\n    if (typeof this.timer1 !== \"undefined\") {\r\n      clearTimeout(this.timer1);\r\n    }\r\n\r\n    if (typeof this.timer2 !== \"undefined\") {\r\n      clearTimeout(this.timer2);\r\n    }\r\n\r\n    this.setState((oldState) => {\r\n      return { ...oldState, isHiding: true };\r\n    });\r\n\r\n    this.timer1 = setTimeout(\r\n      () =>\r\n        this.setState(\r\n          (oldState) => {\r\n            return { ...oldState, isConnected: true };\r\n          },\r\n          () => {\r\n            this.timer2 = setTimeout(\r\n              () => {\r\n                this.setState((oldState) => {\r\n                  return { ...oldState, hideCompletely: true };\r\n                });\r\n\r\n                store.dispatch({ type: \"IS_CONNECTED\", isConnected: true });\r\n              },\r\n\r\n              600\r\n            );\r\n          }\r\n        ),\r\n      250\r\n    );\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        {!this.state.hideCompletely && (\r\n          <Loading\r\n            {...this.props}\r\n            className={\r\n              this.state.isConnected && \"animate__animated animate__fadeOut\"\r\n            }\r\n          >\r\n            <CircularProgress color=\"inherit\" style={{ marginBottom: 20 }} />\r\n            {this.props.children}\r\n          </Loading>\r\n        )}\r\n      </>\r\n    );\r\n  }\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  Typography,\r\n} from \"@material-ui/core\";\r\nimport { useSelector } from \"react-redux\";\r\n\r\nexport default function InfoModal() {\r\n  const [open, setOpen] = React.useState(false);\r\n  // const location = useLocation();\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const isTestVersion = useSelector((state) => state.sharedEnv.isTestVersion);\r\n\r\n  React.useEffect(() => {\r\n    if (isTestVersion && !window.location.host.includes(\"localhost\"))\r\n      setOpen(true);\r\n  }, [isTestVersion]);\r\n\r\n  return (\r\n    <div>\r\n      <Dialog onClose={handleClose} open={open}>\r\n        <DialogTitle id=\"customized-dialog-title\" onClose={handleClose}>\r\n          Warning\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Typography gutterBottom>\r\n            Canvas gets reset every 10 minute because this is test version.\r\n          </Typography>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"inherit\">\r\n            Okay\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport {\r\n  Button,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  FormControl,\r\n  InputLabel,\r\n  Input,\r\n} from \"@material-ui/core\";\r\nimport styled from \"styled-components\";\r\nimport axios from \"../../axios\";\r\nimport socket from \"../../socket\";\r\n\r\nconst Form = styled.form`\r\n  display: flex;\r\n  flex-direction: column;\r\n`;\r\n\r\nconst FormControlSpaced = styled(FormControl)`\r\n  margin-bottom: 10px !important;\r\n\r\n  &:last-of-type {\r\n    margin-bottom: 0px !important;\r\n  }\r\n`;\r\n\r\nexport default function SessionModal() {\r\n  const [open, setOpen] = React.useState(true);\r\n  const [size, setSize] = React.useState({ width: 600, height: 600 });\r\n\r\n  const handleClose = () => {\r\n    setOpen(false);\r\n  };\r\n\r\n  const createSession = () => {\r\n    axios.post(\"/api/create-room\", { canvasSize: size }).then(({ data }) => {\r\n      window.location.href = \"/\" + data.createdRoom.id;\r\n    });\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    socket.on(\"onJoinRoom\", () => {\r\n      handleClose();\r\n    });\r\n  }, []);\r\n\r\n  const onChange = (e) => {\r\n    let limitedValue = e.target.value;\r\n\r\n    // if (limitedValue < 50) limitedValue = 50;\r\n    // if (limitedValue < 50) limitedValue = 50;\r\n    if (limitedValue > 1000) limitedValue = 1000;\r\n    if (limitedValue > 1000) limitedValue = 1000;\r\n\r\n    setSize((oldSize) => {\r\n      return {\r\n        ...oldSize,\r\n        [e.target.id]: limitedValue,\r\n      };\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <Dialog open={open}>\r\n        <DialogTitle onClose={handleClose}>Create Session</DialogTitle>\r\n        <DialogContent dividers>\r\n          <Form>\r\n            {/* <FormControlSpaced>\r\n              <InputLabel htmlFor=\"room_name\">Room Name</InputLabel>\r\n              <Input id=\"room_name\" />\r\n            </FormControlSpaced> */}\r\n            <FormControlSpaced>\r\n              <InputLabel htmlFor=\"width\">Canvas Width</InputLabel>\r\n              <Input\r\n                id=\"width\"\r\n                value={size.width}\r\n                required\r\n                type=\"number\"\r\n                onChange={onChange}\r\n              />\r\n            </FormControlSpaced>\r\n            <FormControlSpaced>\r\n              <InputLabel htmlFor=\"height\">Canvas Height</InputLabel>\r\n              <Input\r\n                id=\"height\"\r\n                value={size.height}\r\n                required\r\n                type=\"number\"\r\n                onChange={onChange}\r\n              />\r\n            </FormControlSpaced>\r\n          </Form>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={createSession} color=\"inherit\">\r\n            Create Session\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </div>\r\n  );\r\n}\r\n","import \"./App.scss\";\nimport Canvas from \"./components/Canvas\";\nimport BottomMenu from \"./components/BottomMenu\";\nimport TopMenu from \"./components/TopMenu\";\nimport Loading from \"./components/Loading\";\nimport InfoModal from \"./components/modals/InfoModal\";\nimport SessionModal from \"./components/modals/SessionModal\";\nimport { useSelector } from \"react-redux\";\nimport \"animate.css\";\nimport React from \"react\";\nimport axios from \"./axios\";\nimport store from \"./store\";\n\nfunction App(props) {\n  const isConnected = useSelector((state) => state.isConnected);\n\n  React.useEffect(() => {\n    axios\n      .get(\"/api/get-environment-vars\")\n      .then(({ data }) => {\n        store.dispatch({\n          type: \"SHARED_ENV\",\n          sharedEnv: { ...store.getState().sharedEnv, ...data },\n        });\n      })\n      .catch((err) => {\n        alert(\"An error occured while loading map.\");\n      });\n  }, []);\n\n  return (\n    <div>\n      <Loading>Connecting to server..</Loading>\n      <Canvas />\n      <SessionModal />\n      {window.location.pathname.replace(\"/\", \"\") !== \"\" && <InfoModal />}\n      {isConnected === true &&\n        window.location.pathname.replace(\"/\", \"\") !== \"\" && (\n          <>\n            <BottomMenu />\n            <TopMenu />\n          </>\n        )}\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport reportWebVitals from \"./reportWebVitals\";\nimport { Provider } from \"react-redux\";\nimport store from \"./store\";\nimport { SnackbarProvider } from \"material-ui-snackbar-provider\";\nimport { BrowserRouter, Route, Switch } from \"react-router-dom\";\nimport { createTheme } from \"@material-ui/core/styles\";\nimport { ThemeProvider } from \"@material-ui/styles\";\n\nconst theme = createTheme({\n  // palette: {\n  //   type: \"dark\",\n  // },\n});\n\nReactDOM.render(\n  <ThemeProvider theme={theme}>\n    <Provider store={store}>\n      <SnackbarProvider\n        SnackbarProps={{\n          autoHideDuration: 2500,\n          anchorOrigin: { vertical: \"top\", horizontal: \"center\" },\n\n          ClickAwayListenerProps: {\n            mouseEvent: false,\n          },\n\n          ContentProps: {\n            style: {\n              minWidth: 0,\n            },\n          },\n        }}\n      >\n        <React.StrictMode>\n          <BrowserRouter>\n            <Switch>\n              <Route path=\"/\">\n                <App />\n              </Route>\n            </Switch>\n          </BrowserRouter>\n        </React.StrictMode>\n      </SnackbarProvider>\n    </Provider>\n  </ThemeProvider>,\n  document.getElementById(\"root\")\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}